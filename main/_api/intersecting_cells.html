<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>intersecting_cells: Doxygen documentation &mdash; soil_simulator  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="utils: Doxygen documentation" href="utils.html" />
    <link rel="prev" title="body_soil: Doxygen documentation" href="body_soil.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            soil_simulator
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="soil_dynamics.html">soil_dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">types</a></li>
<li class="toctree-l2"><a class="reference internal" href="bucket_pos.html">bucket_pos</a></li>
<li class="toctree-l2"><a class="reference internal" href="body_soil.html">body_soil</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">intersecting_cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">soil_simulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">API</a></li>
      <li class="breadcrumb-item active">intersecting_cells: Doxygen documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_api/intersecting_cells.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="intersecting-cells-doxygen-documentation">
<h1>intersecting_cells: Doxygen documentation<a class="headerlink" href="#intersecting-cells-doxygen-documentation" title="Permalink to this heading"></a></h1>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-variables">Variables</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv43rng">
<span id="_CPPv33rng"></span><span id="_CPPv23rng"></span><span id="rng__std::mt19937"></span><span class="target" id="intersecting__cells_8hpp_1adbe79e918414b2480135e3a7871b44ac"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">mt19937</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rng</span></span></span><a class="headerlink" href="#_CPPv43rng" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414soil_simulator">
<span id="_CPPv314soil_simulator"></span><span id="_CPPv214soil_simulator"></span><span id="soil_simulator"></span><span class="target" id="namespacesoil__simulator"></span><span class="k"><span class="pre">namespace</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">soil_simulator</span></span></span><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator21MoveIntersectingCellsEP6SimOutf">
<span id="_CPPv3N14soil_simulator21MoveIntersectingCellsEP6SimOutf"></span><span id="_CPPv2N14soil_simulator21MoveIntersectingCellsEP6SimOutf"></span><span id="soil_simulator::MoveIntersectingCells__SimOutP.float"></span><span class="target" id="intersecting__cells_8hpp_1a9d38a4b3998507e89943b2aa74d54476"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MoveIntersectingCells</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator21MoveIntersectingCellsEP6SimOutf" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator24MoveIntersectingBodySoilEP6SimOutf">
<span id="_CPPv3N14soil_simulator24MoveIntersectingBodySoilEP6SimOutf"></span><span id="_CPPv2N14soil_simulator24MoveIntersectingBodySoilEP6SimOutf"></span><span id="soil_simulator::MoveIntersectingBodySoil__SimOutP.float"></span><span class="target" id="intersecting__cells_8hpp_1a81b23c9cf33af5de4da526de32fc3e4b"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MoveIntersectingBodySoil</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator24MoveIntersectingBodySoilEP6SimOutf" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator20MoveIntersectingBodyEP6SimOutf">
<span id="_CPPv3N14soil_simulator20MoveIntersectingBodyEP6SimOutf"></span><span id="_CPPv2N14soil_simulator20MoveIntersectingBodyEP6SimOutf"></span><span id="soil_simulator::MoveIntersectingBody__SimOutP.float"></span><span class="target" id="intersecting__cells_8hpp_1af3ee72c596b5a2a237b4b95f7ffe51a1"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MoveIntersectingBody</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator20MoveIntersectingBodyEP6SimOutf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function moves the soil cells in the <code class="docutils literal notranslate"><span class="pre">terrain_</span></code> that intersect with a bucket. </p>
<p>
This function checks the eight lateral directions surrounding the intersecting soil column and moves the soil to available spaces. If there is insufficient space for all the soil, it incrementally checks the eight directions farther from the intersecting soil column until all the soil has been moved. The process can be illustrated as follows <div class="highlight-default notranslate"><div class="highlight"><pre><span></span>            ↖   ↑   ↗
              ↖ ↑ ↗
            ← ← O → →
              ↙ ↓ ↘
            ↙   ↓   ↘
</pre></div>
</div>
 Note that the order in which the directions are checked is randomized in order to avoid asymmetrical results. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator12MoveBodySoilEP6SimOutiiifiifbf">
<span id="_CPPv3N14soil_simulator12MoveBodySoilEP6SimOutiiifiifbf"></span><span id="_CPPv2N14soil_simulator12MoveBodySoilEP6SimOutiiifiifbf"></span><span id="soil_simulator::MoveBodySoil__SimOutP.i.i.i.float.i.i.float.b.float"></span><span class="target" id="intersecting__cells_8hpp_1a8782f9bf7be372b263e6d4c045a2c802"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">tuple</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MoveBodySoil</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ind_p</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ii_p</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">jj_p</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">max_h</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ii_n</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">jj_n</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">h_soil</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">wall_presence</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator12MoveBodySoilEP6SimOutiiifiifbf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function tries to move the soil cells resting on the bucket layer <code class="docutils literal notranslate"><span class="pre">ind_p</span></code> at the location (<code class="docutils literal notranslate"><span class="pre">ii_p</span></code>, <code class="docutils literal notranslate"><span class="pre">jj_p</span></code>) to a new location at (<code class="docutils literal notranslate"><span class="pre">ii_n</span></code>, <code class="docutils literal notranslate"><span class="pre">jj_n</span></code>). </p>
<p>
This function can be separated into three main scenarios:<ul class="simple">
<li><p>If all the soil can be moved to the new location (either on the terrain or on the bucket), the soil is moved and the value of <code class="docutils literal notranslate"><span class="pre">h_soil</span></code> is set to zero.</p></li>
<li><p>If a bucket wall is blocking the movement, the <code class="docutils literal notranslate"><span class="pre">wall_presence</span></code> parameter is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>If there is insufficient space to move all the soil but no bucket wall is blocking the movement, the function updates the values for the new location and adjusts <code class="docutils literal notranslate"><span class="pre">h_soil</span></code> accordingly.</p></li>
</ul>
</p>
<p>This function is designed to be used iteratively by the function <code class="docutils literal notranslate"><span class="pre">MoveIntersectingBodySoil</span></code> until all intersecting soil cells are moved.</p>
<p>Note that, by convention, the soil can be moved from the bucket to the terrain even if the bucket is underground. Moreover, in cases where the soil should be moved to the terrain, all soil is moved regardless of the available space. If this movement induces intersecting soil cells, it will be resolved by <code class="docutils literal notranslate"><span class="pre">MoveIntersectingBody</span></code>. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>ind_p</strong> – Index of the previous considered bucket layer. </p></li>
<li><p><strong>ii_p</strong> – Index of the previous considered position in the X direction. </p></li>
<li><p><strong>jj_p</strong> – Index of the previous considered position in the Y direction. </p></li>
<li><p><strong>max_h</strong> – Maximum height authorized for the movement. [m] </p></li>
<li><p><strong>ii_n</strong> – Index of the new considered position in the X direction. </p></li>
<li><p><strong>jj_n</strong> – Index of the new considered position in the Y direction. </p></li>
<li><p><strong>h_soil</strong> – Height of the soil column left to be moved. [m] </p></li>
<li><p><strong>wall_presence</strong> – Indicates whether a wall is blocking the movement. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple composed of the index of the new considered bucket layer, the index of the new considered position in the X direction, the index of the new considered position in the Y direction, the height of the soil column left to be moved, and a boolean indicating whether a bucket wall is blocking the movement.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator23LocateIntersectingCellsEP6SimOutf">
<span id="_CPPv3N14soil_simulator23LocateIntersectingCellsEP6SimOutf"></span><span id="_CPPv2N14soil_simulator23LocateIntersectingCellsEP6SimOutf"></span><span id="soil_simulator::LocateIntersectingCells__SimOutP.float"></span><span class="target" id="intersecting__cells_8hpp_1a440356f5f2e5b422bf5ba55bb8b74d47"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">LocateIntersectingCells</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator23LocateIntersectingCellsEP6SimOutf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function identifies all the soil cells in the <code class="docutils literal notranslate"><span class="pre">terrain_</span></code> that intersect with the bucket. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="body_soil.html" class="btn btn-neutral float-left" title="body_soil: Doxygen documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="utils.html" class="btn btn-neutral float-right" title="utils: Doxygen documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Vilella Kenny.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>Versions</dt>
      <dd><a href="intersecting_cells.html">main</a></dd>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>