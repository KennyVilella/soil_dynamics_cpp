<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>body_pos: Doxygen documentation &mdash; soil_simulator  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="body_soil: Doxygen documentation" href="body_soil.html" />
    <link rel="prev" title="types: Doxygen documentation" href="types.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            soil_simulator
          </a>
              <div class="version">
                1.1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../types.html">Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grid.html">Grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../body.html">Body</a></li>
<li class="toctree-l1"><a class="reference internal" href="../body_soil.html">Body soil</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intersecting_cells.html">Intersecting cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../relax.html">Relax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">Utility</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="soil_evolution.html">soil_evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="soil_dynamics.html">soil_dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">types</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">body_pos</a></li>
<li class="toctree-l2"><a class="reference internal" href="body_soil.html">body_soil</a></li>
<li class="toctree-l2"><a class="reference internal" href="intersecting_cells.html">intersecting_cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="relax.html">relax</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">soil_simulator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../api.html">API</a></li>
      <li class="breadcrumb-item active">body_pos: Doxygen documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/_api/body_pos.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="body-pos-doxygen-documentation">
<h1>body_pos: Doxygen documentation<a class="headerlink" href="#body-pos-doxygen-documentation" title="Permalink to this heading"></a></h1>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv414soil_simulator">
<span id="_CPPv314soil_simulator"></span><span id="_CPPv214soil_simulator"></span><span id="soil_simulator"></span><span class="target" id="namespacesoil__simulator"></span><span class="k"><span class="pre">namespace</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">soil_simulator</span></span></span><a class="headerlink" href="#_CPPv414soil_simulator" title="Permalink to this definition"></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-functions">Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP6Bucket8SimParamf">
<span id="_CPPv3N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP6Bucket8SimParamf"></span><span id="_CPPv2N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP6Bucket8SimParamf"></span><span id="soil_simulator::CalcBodyPos__SimOutP.std::vector:float:.std::vector:float:.Grid.BucketP.SimParam.float"></span><span class="target" id="body__pos_8hpp_1ae2c6c350f6fff2bc54d13ebe42b0c274"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CalcBodyPos</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">pos</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ori</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator6BucketE" title="soil_simulator::Bucket"><span class="n"><span class="pre">Bucket</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">bucket</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator8SimParamE" title="soil_simulator::SimParam"><span class="n"><span class="pre">SimParam</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">sim_param</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP6Bucket8SimParamf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function determines all the cells where the bucket is located. </p>
<p>
The bucket position is calculated based on its reference pose stored in the <code class="docutils literal notranslate"><a class="reference internal" href="types.html#classsoil__simulator_1_1_bucket"><span class="std std-ref"><span class="pre">Bucket</span></span></a></code> class, as well as the provided position (<code class="docutils literal notranslate"><span class="pre">pos</span></code>) and orientation (<code class="docutils literal notranslate"><span class="pre">ori</span></code>). <code class="docutils literal notranslate"><span class="pre">pos</span></code> and <code class="docutils literal notranslate"><span class="pre">ori</span></code> are used to apply the appropriate translation and rotation to the bucket relative to its reference pose. The centre of rotation is assumed to be the bucket origin. The orientation is provided using the quaternion definition. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>pos</strong> – Cartesian coordinates of the bucket origin. [m] </p></li>
<li><p><strong>ori</strong> – Orientation of the bucket. [Quaternion] </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid. </p></li>
<li><p><strong>bucket</strong> – Class that stores information related to the bucket object. </p></li>
<li><p><strong>sim_param</strong> – Class that stores information related to the simulation. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP5Blade8SimParamf">
<span id="_CPPv3N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP5Blade8SimParamf"></span><span id="_CPPv2N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP5Blade8SimParamf"></span><span id="soil_simulator::CalcBodyPos__SimOutP.std::vector:float:.std::vector:float:.Grid.BladeP.SimParam.float"></span><span class="target" id="body__pos_8hpp_1a2d02bdd842030a0b17b8587124b9fb6e"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CalcBodyPos</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">pos</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ori</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator5BladeE" title="soil_simulator::Blade"><span class="n"><span class="pre">Blade</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">blade</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator8SimParamE" title="soil_simulator::SimParam"><span class="n"><span class="pre">SimParam</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">sim_param</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator11CalcBodyPosEP6SimOutNSt6vectorIfEENSt6vectorIfEE4GridP5Blade8SimParamf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function determines all the cells where the blade is located. </p>
<p>
The blade position is calculated based on its reference pose stored in the <code class="docutils literal notranslate"><a class="reference internal" href="types.html#classsoil__simulator_1_1_blade"><span class="std std-ref"><span class="pre">Blade</span></span></a></code> class, as well as the provided position (<code class="docutils literal notranslate"><span class="pre">pos</span></code>) and orientation (<code class="docutils literal notranslate"><span class="pre">ori</span></code>). <code class="docutils literal notranslate"><span class="pre">pos</span></code> and <code class="docutils literal notranslate"><span class="pre">ori</span></code> are used to apply the appropriate translation and rotation to the blade relative to its reference pose. The centre of rotation is assumed to be the blade origin. The orientation is provided using the quaternion definition. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>pos</strong> – Cartesian coordinates of the blade origin. [m] </p></li>
<li><p><strong>ori</strong> – Orientation of the blade. [Quaternion] </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid. </p></li>
<li><p><strong>blade</strong> – Class that stores information related to the blade object. </p></li>
<li><p><strong>sim_param</strong> – Class that stores information related to the simulation. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator16CalcRectanglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf">
<span id="_CPPv3N14soil_simulator16CalcRectanglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf"></span><span id="_CPPv2N14soil_simulator16CalcRectanglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf"></span><span id="soil_simulator::CalcRectanglePos__std::vector:float:.std::vector:float:.std::vector:float:.std::vector:float:.Grid.float"></span><span class="target" id="body__pos_8hpp_1a2179535c3816696c99c48313caf203f9"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CalcRectanglePos</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">a</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">b</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">c</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">d</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator16CalcRectanglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function determines the cells where a rectangle surface is located. </p>
<p>
The rectangle is defined by providing the Cartesian coordinates of its four vertices in the proper order.</p>
<p>To optimize performance, the function iterates over a portion of the horizontal grid where the rectangle is located. For each cell, the function calculates the height of the plane formed by the rectangle at the top right corner of the cell. If the cell is within the rectangle area, the calculated height is added to the results for the four neighbouring cells.</p>
<p>This method works because when a plane intersects with a rectangular cell, the minimum and maximum height of the plane within the cell occurs at one of the cell corners. By iterating through all the cells, the function ensures that all the corners of each cell are investigated.</p>
<p>However, this approach does not work when the rectangle is perpendicular to the XY plane. To handle this case, the function uses the <code class="docutils literal notranslate"><span class="pre">CalcLinePos</span></code> function to include the cells that lie on the four edges of the rectangle.</p>
<p>Note:<ul class="simple">
<li><p>The iteration is performed over the top right corner of each cell, but any other corner could have been chosen without affecting the results.</p></li>
<li><p>Not all cells are provided, since, at a given XY position, only the cells with the minimum and maximum height are important.</p></li>
<li><p>When the rectangle follows a cell border, the exact location of the rectangle becomes ambiguous. It is assumed that the caller resolves this ambiguity. </p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – Cartesian coordinates of one vertex of the rectangle. [m] </p></li>
<li><p><strong>b</strong> – Cartesian coordinates of one vertex of the rectangle. [m] </p></li>
<li><p><strong>c</strong> – Cartesian coordinates of one vertex of the rectangle. [m] </p></li>
<li><p><strong>d</strong> – Cartesian coordinates of one vertex of the rectangle. [m] </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Collection of cells indices where the rectangle is located. Result is not sorted and duplicates may be present.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator24DecomposeVectorRectangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif">
<span id="_CPPv3N14soil_simulator24DecomposeVectorRectangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif"></span><span id="_CPPv2N14soil_simulator24DecomposeVectorRectangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif"></span><span id="soil_simulator::DecomposeVectorRectangle__std::vector:float:.std::vector:float:.std::vector:float:.i.i.i.i.float"></span><span class="target" id="body__pos_8hpp_1a548c40b2efad17e1de1cefd5213b180d"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">tuple</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DecomposeVectorRectangle</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ab_ind</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ad_ind</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">a_ind</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_min_x</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_min_y</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_length_x</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_length_y</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator24DecomposeVectorRectangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function performs a vector decomposition on a portion of the horizontal plane where a rectangle ABCD is located. </p>
<p>
The position of the rectangle is defined by its edges AB and AD, while the specified area extends over [<code class="docutils literal notranslate"><span class="pre">area_min_x</span></code>, <code class="docutils literal notranslate"><span class="pre">area_min_x</span> <span class="pre">+</span> <span class="pre">area_length_x</span></code>] on the X direction and [<code class="docutils literal notranslate"><span class="pre">area_min_y</span></code>, <code class="docutils literal notranslate"><span class="pre">area_min_y</span> <span class="pre">+</span> <span class="pre">area_length_y</span></code>] on the Y direction.</p>
<p>For each cell in the specified area, the function decomposes it into the basis formed by the vectors AB and AD. Let O be the name of a cell, it can then be decomposed as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AO</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span> <span class="o">+</span> <span class="n">c_ad</span> <span class="o">*</span> <span class="n">AD</span><span class="o">.</span>
</pre></div>
</div>
<p>This decomposition leads to a system of 2 equations with 2 unknowns (c_ab and c_ad)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_ad</span> <span class="o">*</span> <span class="n">AD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">{</span><span class="mi">1</span><span class="p">},</span>
<span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_ad</span> <span class="o">*</span> <span class="n">AD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">{</span><span class="mi">2</span><span class="p">}</span><span class="o">.</span>
</pre></div>
</div>
<p>One may note that AB[1] * {2} - AB[2] * {1} implies that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ad</span> <span class="o">*</span> <span class="n">AD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">c_ad</span> <span class="o">*</span> <span class="n">AD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>that can be further rewritten as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c_ad</span> <span class="o">=</span> <span class="p">(</span><span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">AD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">AD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span>
</pre></div>
</div>
<p>Similarly, AD[1] * {2} - AD[2] * {1} implies that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c_ab</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">AD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">AD</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">AD</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span>
</pre></div>
</div>
<p>This decomposition allows us to determine whether the cell O is inside the rectangle area, since this requires c_ab and c_ad to be between 0 and 1.</p>
<p>Note: By convention, the decomposition is done at the top right corner of each cell. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ab_ind</strong> – Indices representing the edge AB of the rectangle. </p></li>
<li><p><strong>ad_ind</strong> – Indices representing the edge AD of the rectangle. </p></li>
<li><p><strong>a_ind</strong> – Indices of the vertex A from which the edges AB and AD start. </p></li>
<li><p><strong>area_min_x</strong> – Minimum index in the X direction of the specified area. </p></li>
<li><p><strong>area_min_y</strong> – Minimum index in the Y direction of the specified area. </p></li>
<li><p><strong>area_length_x</strong> – Number of grid elements in the X direction of the specified area. </p></li>
<li><p><strong>area_length_y</strong> – Number of grid elements in the Y direction of the specified area. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple composed of a vector of vector giving the vector decomposition in terms of the AB component, a vector of vector giving the vector decomposition in terms of the AD component, a vector of vector indicating whether the cell is inside the rectangle area, and the number of cells inside the rectangle area.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator15CalcTrianglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf">
<span id="_CPPv3N14soil_simulator15CalcTrianglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf"></span><span id="_CPPv2N14soil_simulator15CalcTrianglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf"></span><span id="soil_simulator::CalcTrianglePos__std::vector:float:.std::vector:float:.std::vector:float:.Grid.float"></span><span class="target" id="body__pos_8hpp_1a368a653cb44e842ab5be588a7a9ee7ec"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CalcTrianglePos</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">a</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">b</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">c</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator15CalcTrianglePosENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEE4Gridf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function determines the cells where a triangle surface is located. </p>
<p>
The triangle is defined by providing the Cartesian coordinates of its three vertices in the proper order.</p>
<p>To optimize performance, the function iterates over a portion of the horizontal grid where the triangle is located. For each cell, the function calculates the height of the plane formed by the triangle at the top right corner of the cell. If the cell is within the triangle area, the calculated height is added to the results for the four neighbouring cells.</p>
<p>This method works because when a plane intersects with a rectangular cell, the minimum and maximum height of the plane within the cell occurs at one of the cell corners. By iterating through all the cells, the function ensures that all the corners of each cell are investigated.</p>
<p>However, this approach does not work when the triangle is perpendicular to the XY plane. To handle this case, the function uses the <code class="docutils literal notranslate"><span class="pre">CalcLinePos</span></code> function to include the cells that lie on the three edges of the triangle.</p>
<p>Note:<ul class="simple">
<li><p>The iteration is performed over the top right corner of each cell, but any other corner could have been chosen without affecting the results.</p></li>
<li><p>Not all cells are provided, since, at a given XY position, only the cells with the minimum and maximum height are important.</p></li>
<li><p>When the triangle follows a cell border, the exact location of the triangle becomes ambiguous. It is assumed that the caller resolves this ambiguity. </p></li>
</ul>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – Cartesian coordinates of one vertex of the triangle. [m] </p></li>
<li><p><strong>b</strong> – Cartesian coordinates of one vertex of the triangle. [m] </p></li>
<li><p><strong>c</strong> – Cartesian coordinates of one vertex of the triangle. [m] </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Collection of cells indices where the triangle is located. Result is not sorted and duplicates may be present.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator23DecomposeVectorTriangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif">
<span id="_CPPv3N14soil_simulator23DecomposeVectorTriangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif"></span><span id="_CPPv2N14soil_simulator23DecomposeVectorTriangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif"></span><span id="soil_simulator::DecomposeVectorTriangle__std::vector:float:.std::vector:float:.std::vector:float:.i.i.i.i.float"></span><span class="target" id="body__pos_8hpp_1a324a3b394c8ea1a119572a05fddf37b8"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">tuple</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">DecomposeVectorTriangle</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ab_ind</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ac_ind</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">a_ind</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_min_x</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_min_y</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_length_x</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_length_y</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator23DecomposeVectorTriangleENSt6vectorIfEENSt6vectorIfEENSt6vectorIfEEiiiif" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function performs a vector decomposition on a portion of the horizontal plane where a tritangle ABC is located. </p>
<p>
The position of the triangle is defined by its edges AB and AC, while the specified area extends over [<code class="docutils literal notranslate"><span class="pre">area_min_x</span></code>, <code class="docutils literal notranslate"><span class="pre">area_min_x</span> <span class="pre">+</span> <span class="pre">area_length_x</span></code>] on the X direction and [<code class="docutils literal notranslate"><span class="pre">area_min_y</span></code>, <code class="docutils literal notranslate"><span class="pre">area_min_y</span> <span class="pre">+</span> <span class="pre">area_length_y</span></code>] on the Y direction.</p>
<p>For each cell in the specified area, the function decomposes it into the basis formed by the vectors AB and AC. Let O be the name of a cell, it can then be decomposed as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AO</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span> <span class="o">+</span> <span class="n">c_ac</span> <span class="o">*</span> <span class="n">AC</span><span class="o">.</span>
</pre></div>
</div>
<p>This decomposition leads to a system of 2 equations with 2 unknowns (c_ab and c_ac)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_ac</span> <span class="o">*</span> <span class="n">AC</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">{</span><span class="mi">1</span><span class="p">},</span>
<span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ab</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">c_ac</span> <span class="o">*</span> <span class="n">AC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">{</span><span class="mi">2</span><span class="p">}</span><span class="o">.</span>
</pre></div>
</div>
<p>One may note that AB[1] * {2} - AB[2] * {1} implies that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">c_ac</span> <span class="o">*</span> <span class="n">AC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">c_ac</span> <span class="o">*</span> <span class="n">AC</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<p>that can be further rewritten as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c_ac</span> <span class="o">=</span> <span class="p">(</span><span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">AC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">AC</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span>
</pre></div>
</div>
<p>Similarly, AC[1] * {2} - AC[2] * {1} implies that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c_ab</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="n">AC</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">AC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AO</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">AC</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">AC</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">AB</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">.</span>
</pre></div>
</div>
<p>This decomposition allows us to determine whether the cell O is inside the triangle area, since this requires c_ab and c_ac to be between 0 and 1, and the sum of c_ab and c_ac to be lower than 1.</p>
<p>Note: By convention, the decomposition is done at the top right corner of each cell. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ab_ind</strong> – Indices representing the edge AB of the triangle. </p></li>
<li><p><strong>ac_ind</strong> – Indices representing the edge AC of the triangle. </p></li>
<li><p><strong>a_ind</strong> – Indices of the vertex A from which the edges AB and AC start. </p></li>
<li><p><strong>area_min_x</strong> – Minimum index in the X direction of the specified area. </p></li>
<li><p><strong>area_min_y</strong> – Minimum index in the Y direction of the specified area. </p></li>
<li><p><strong>area_length_x</strong> – Number of grid elements in the X direction of the specified area. </p></li>
<li><p><strong>area_length_y</strong> – Number of grid elements in the Y direction of the specified area. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple composed of a vector of vector giving the vector decomposition in terms of the AB component, a vector of vector giving the vector decomposition in terms of the AC component, a vector of vector indicating whether the cell is inside the triangle area, and the number of cells inside the triangle area.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator11CalcLinePosENSt6vectorIfEENSt6vectorIfEE4Grid">
<span id="_CPPv3N14soil_simulator11CalcLinePosENSt6vectorIfEENSt6vectorIfEE4Grid"></span><span id="_CPPv2N14soil_simulator11CalcLinePosENSt6vectorIfEENSt6vectorIfEE4Grid"></span><span id="soil_simulator::CalcLinePos__std::vector:float:.std::vector:float:.Grid"></span><span class="target" id="body__pos_8hpp_1a6b80177a1390bc07e10bfdaf0f7a594c"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CalcLinePos</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">a</span></span>, <span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">b</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator11CalcLinePosENSt6vectorIfEENSt6vectorIfEE4Grid" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function determines all the cells that lie on a straight line between two Cartesian coordinates. </p>
<p>
The algorithm implemented in this function comes from the article: “A Fast Voxel Traversal Algorithm for Ray Tracing” by J. Amanatides and A. Woo.</p>
<p>The floating-point values are rounded to obtain the cell indices in the X, Y, Z directions. As the centre of each cell is considered to be on the centre of the top surface, <code class="docutils literal notranslate"><span class="pre">round</span></code> should be used for getting the cell indices in the X and Y direction, while <code class="docutils literal notranslate"><span class="pre">ceil</span></code> should be used for the Z direction.</p>
<p>Note: When the line follows a cell border, the exact location of the line becomes ambiguous. It is assumed that the caller resolves this ambiguity. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> – Cartesian coordinates of the first extremity of the line. [m] </p></li>
<li><p><strong>b</strong> – Cartesian coordinates of the second extremity of the line. [m] </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Collection of cells indices where the line is located.</p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator10UpdateBodyENSt6vectorINSt6vectorIiEEEEP6SimOut4Gridf">
<span id="_CPPv3N14soil_simulator10UpdateBodyENSt6vectorINSt6vectorIiEEEEP6SimOut4Gridf"></span><span id="_CPPv2N14soil_simulator10UpdateBodyENSt6vectorINSt6vectorIiEEEEP6SimOut4Gridf"></span><span id="soil_simulator::UpdateBody__std::vector:std::vector:i::.SimOutP.Grid.float"></span><span class="target" id="body__pos_8hpp_1a04a0807350c0592bf1b49aa84dc672ef"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">UpdateBody</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">vector</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">&gt;</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">area_pos</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <a class="reference internal" href="types.html#_CPPv4N14soil_simulator4GridE" title="soil_simulator::Grid"><span class="n"><span class="pre">Grid</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">grid</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator10UpdateBodyENSt6vectorINSt6vectorIiEEEEP6SimOut4Gridf" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function updates the body position in <code class="docutils literal notranslate"><span class="pre">body</span></code> following the cells composing <code class="docutils literal notranslate"><span class="pre">area_pos</span></code>. </p>
<p>
For each XY position, the first cell found in <code class="docutils literal notranslate"><span class="pre">area_pos</span></code> corresponds to the minimum height of the body, while the last one provides the maximum height. As a result, this function must be called separately for each body wall and <code class="docutils literal notranslate"><span class="pre">area_pos</span></code> must be sorted. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>area_pos</strong> – A collection of cell indices specifying where a body wall is located. </p></li>
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>grid</strong> – Class that stores information related to the simulation grid. </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N14soil_simulator17IncludeNewBodyPosEP6SimOutiifff">
<span id="_CPPv3N14soil_simulator17IncludeNewBodyPosEP6SimOutiifff"></span><span id="_CPPv2N14soil_simulator17IncludeNewBodyPosEP6SimOutiifff"></span><span id="soil_simulator::IncludeNewBodyPos__SimOutP.i.i.float.float.float"></span><span class="target" id="body__pos_8hpp_1a3ea4ec8bd8dc0b85dbdec40a39442bcc"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">IncludeNewBodyPos</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="types.html#_CPPv4N14soil_simulator6SimOutE" title="soil_simulator::SimOut"><span class="n"><span class="pre">SimOut</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n sig-param"><span class="pre">sim_out</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">ii</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">jj</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">min_h</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">max_h</span></span>, <span class="kt"><span class="pre">float</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">tol</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N14soil_simulator17IncludeNewBodyPosEP6SimOutiifff" title="Permalink to this definition"></a><br /></dt>
<dd><p>This function updates the body position in <code class="docutils literal notranslate"><span class="pre">body</span></code> at the coordinates (<code class="docutils literal notranslate"><span class="pre">ii</span></code>, <code class="docutils literal notranslate"><span class="pre">jj</span></code>). </p>
<p>
The minimum and maximum heights of the body at that position are given by <code class="docutils literal notranslate"><span class="pre">min_h</span></code> and <code class="docutils literal notranslate"><span class="pre">max_h</span></code>, respectively. If the given position overlaps with an existing position, then the existing position is updated as the union of the two positions. Otherwise, a new position is added to <code class="docutils literal notranslate"><span class="pre">body_</span></code>. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sim_out</strong> – Class that stores simulation outputs. </p></li>
<li><p><strong>ii</strong> – Index of the considered position in the X direction. </p></li>
<li><p><strong>jj</strong> – Index of the considered position in the Y direction. </p></li>
<li><p><strong>min_h</strong> – Minimum height of the body. [m] </p></li>
<li><p><strong>max_h</strong> – Maximum height of the body. [m] </p></li>
<li><p><strong>tol</strong> – Small number used to handle numerical approximation errors.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="types.html" class="btn btn-neutral float-left" title="types: Doxygen documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="body_soil.html" class="btn btn-neutral float-right" title="body_soil: Doxygen documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Vilella Kenny.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>Versions</dt>
      <dd><a href="../../v1.0.0/index.html">v1.0.0</a></dd>
      <dd><a href="../../v1.1.0/_api/body_pos.html">v1.1.0</a></dd>
      <dd><a href="../../v1.1.1/_api/body_pos.html">v1.1.1</a></dd>
      <dd><a href="body_pos.html">main</a></dd>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>